---
import type { GridWidgetType } from '@checkpoint/shared-types';

interface Props {
  data: GridWidgetType;
}
const { data } = Astro.props as Props;

const getGridWidgetItemStyle = (style: GridWidgetType['style']) => {
  switch (style) {
    case '1':
      return 'bg-primary text-primary-content';
    case '2':
      return 'bg-base-100 text-base-content border-2 border-b-6';
    default:
      return 'bg-primary text-primary-content';
  }
};

const getLinkColor = (style: GridWidgetType['style']) => {
  switch (style) {
    case '1':
      return 'text-secondary';
    case '2':
      return 'text-base-content';
    default:
      return 'text-secondary-content';
  }
};
---

{
  data.items.length ? (
    <section class="gap-16 flex flex-col">
      <div class="flex items-center gap-16">
        {data.title && <h2>{data.title}</h2>}
        {data.subtitle && (
          <p class="text-xl text-balance w-1/2">
            Explore Real-Life Examples of Our Proven Digital Marketing Success through Our Case
            Studies
          </p>
        )}
      </div>
      <div
        class={`${getGridWidgetItemStyle(data.style)} rounded-box grid grid-cols-3 gap-5 py-18 px-10`}
      >
        {data.items.map((i) => (
          <div class="px-10 w-full flex flex-col gap-7 py-8 border-2 rounded-2xl">
            {i.grid_widget_items_id.title && (
              <span class="text-2xl font-medium">{i.grid_widget_items_id.title}</span>
            )}
            {i.grid_widget_items_id.content && (
              <span class="text-lg! text-balance grow">{i.grid_widget_items_id.content}</span>
            )}
            {i.grid_widget_items_id.href && (
              <a
                href={i.grid_widget_items_id.href}
                aria-label="Learn More"
                class={`text-xl flex items-center gap-4 group`}
              >
                <span class={`font-medium ${getLinkColor(data.style)} relative after:absolute after:bottom-0 after:left-1/2 after:h-0.5 after:w-0 after:bg-current after:transition-all after:duration-300 group-hover:after:left-0 group-hover:after:w-full`}>Learn More</span>
                <svg
                  width="21"
                  height="20"
                  viewBox="0 0 21 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M1.25 13.701C0.532561 14.1152 0.286748 15.0326 0.700962 15.75C1.11518 16.4674 2.03256 16.7133 2.75 16.299L1.25 13.701ZM20.7694 5.38823C20.9838 4.58803 20.5089 3.76552 19.7087 3.55111L6.66874 0.0570541C5.86854 -0.157359 5.04603 0.317515 4.83162 1.11771C4.61721 1.91791 5.09208 2.74042 5.89228 2.95483L17.4834 6.06066L14.3776 17.6518C14.1631 18.452 14.638 19.2745 15.4382 19.4889C16.2384 19.7033 17.0609 19.2284 17.2753 18.4282L20.7694 5.38823ZM2.75 16.299L20.0705 6.29904L18.5705 3.70096L1.25 13.701L2.75 16.299Z"
                    fill="#B9FF66"
                  />
                </svg>
              </a>
            )}
          </div>
        ))}
      </div>
    </section>
  ) : null
}
